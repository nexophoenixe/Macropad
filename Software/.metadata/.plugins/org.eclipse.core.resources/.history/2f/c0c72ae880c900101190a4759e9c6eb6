/*
 * macropad.c
 *
 *  Created on: 24 Nov 2025
 *      Author: jangr
 */

#include "macropad.h"
#include "usbd_hid.h"

extern USBD_HandleTypeDef hUsbDeviceFS;

uint16_t PORT_shifting(){
	uint16_t PORTA = GPIOA->IDR & 0b0000000011000000;
	uint16_t PORTB = GPIOB->IDR & 0b0011011100111110;

	uint16_t PORT = PORTA & PORTB;

	return PORT;
}


void USBFS_Send(USBD_HandleTypeDef *hUsbDeviceFS, keyRepStruct *KeyHIDRepStruct){
	  USBD_HID_SendReport(&hUsbDeviceFS, (uint8_t *) &KeyHIDRepStruct, 8);
	  HAL_Delay(20);
	  KeyHIDRepStruct->MODIFIER= 0x00;
	  KeyHIDRepStruct->KEYCODE1 = 0x00;
	  USBD_HID_SendReport(&hUsbDeviceFS, (uint8_t *) &KeyHIDRepStruct, 8);
}

